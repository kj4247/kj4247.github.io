(function(r,e){if(typeof exports==="object"){module.exports=exports=e()}else if(typeof define==="function"&&define.amd){define(e)}else{window.BASE64=e()}})(this,function(){var d=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"];var p=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","-","_"];var w=function(r){var e=[];while(r>0){var a=r%2;r=Math.floor(r/2);e.push(a)}e.reverse();return e};var l=function(r){var e=0;var a=0;for(var n=r.length-1;n>=0;--n){var t=r[n];if(t==1){e+=Math.pow(2,a)}++a}return e};var v=function(r,e){var a=8-(r+1)+(r-1)*6;var n=e.length;var t=a-n;while(--t>=0){e.unshift(0)}var f=[];var i=r;while(--i>=0){f.push(1)}f.push(0);var v=0,o=8-(r+1);for(;v<o;++v){f.push(e[v])}for(var c=0;c<r-1;++c){f.push(1);f.push(0);var u=6;while(--u>=0){f.push(e[v++])}}return f};var h=function(r){var e=[];for(var a=0,n=r.length;a<n;++a){var t=r.charCodeAt(a);var f=w(t);if(t<128){var i=8-f.length;while(--i>=0){f.unshift(0)}e=e.concat(f)}else if(t>=128&&t<=2047){e=e.concat(v(2,f))}else if(t>=2048&&t<=65535){e=e.concat(v(3,f))}else if(t>=65536&&t<=2097151){e=e.concat(v(4,f))}else if(t>=2097152&&t<=67108863){e=e.concat(v(5,f))}else if(t>=4e6&&t<=2147483647){e=e.concat(v(6,f))}}return e};var b=function(r){var e;var a=[];var n="";for(var t=0,f=r.length;t<f;){if(r[t]==0){e=l(r.slice(t,t+8));n+=String.fromCharCode(e);t+=8}else{var i=0;while(t<f){if(r[t]==1){++i}else{break}++t}a=a.concat(r.slice(t+1,t+8-i));t+=8-i;while(i>1){a=a.concat(r.slice(t+2,t+8));t+=8;--i}e=l(a);n+=String.fromCharCode(e);a=[]}}return n};var e=function(r,e){var a=[];var n=h(r);var t=e?p:d;var f=0;for(var i=0,v=n.length;i<v;i+=6){var o=i+6-v;if(o==2){f=2}else if(o==4){f=4}var c=f;while(--c>=0){n.push(0)}a.push(l(n.slice(i,i+6)))}var u="";for(var i=0,v=a.length;i<v;++i){u+=t[a[i]]}for(var i=0,v=f/2;i<v;++i){u+="="}return u};var a=function(r,e){var a=r.length;var n=0;var t=e?p:d;if(r.charAt(a-1)=="="){if(r.charAt(a-2)=="="){n=4;r=r.substring(0,a-2)}else{n=2;r=r.substring(0,a-1)}}var f=[];for(var i=0,v=r.length;i<v;++i){var o=r.charAt(i);for(var c=0,u=t.length;c<u;++c){if(o==t[c]){var l=w(c);var h=l.length;if(6-h>0){for(var s=6-h;s>0;--s){l.unshift(0)}}f=f.concat(l);break}}}if(n>0){f=f.slice(0,f.length-n)}var g=b(f);return g};var r={encode:function(r){return e(r,false)},decode:function(r){return a(r,false)},urlsafe_encode:function(r){return e(r,true)},urlsafe_decode:function(r){return a(r,true)}};return r});